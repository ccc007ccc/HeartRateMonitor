
# 心率监控器

这是一个心率监控器应用，带有一个浮动窗口，用于实时显示心率，特别适用于游戏或其他全屏活动(仅在小米手环10上测试过)。

🌍 [English](./README.md) | **简体中文**

## 功能

* **低功耗蓝牙 (BLE) 设备扫描:** 扫描附近的BLE设备，并允许用户选择一个心率广播设备。
* **实时心率显示:** 在专用的UI窗口中显示当前心率。
* **悬浮窗:** 一个可自定义的、总在最前的窗口，用于显示心率。
* **可穿透点击的悬浮窗:** 悬浮窗可以被锁定，变为可穿透点击，从而允许与下方的应用程序进行交互。
* **可自定义颜色:** 可以为锁定和解锁状态下的悬浮窗设置不同的字体颜色。
* **配置保存:** 保存上次使用的设备MAC地址和悬浮窗设置（位置、可见性、锁定状态和颜色）。

## 文件说明

* **main.py**: 应用程序的主入口点。它处理命令行参数并启动GUI。
* **heart\_rate\_display\_ui.py**: 包含主应用程序类 `HeartRateMonitor`，它使用tkinter设置用户界面。
* **floating\_window.py**: 定义了 `FloatingWindow` 类，该类管理用于显示心率的浮动窗口。
* **get\_heart\_rate/heart\_rate\_tool.py**: 此模块负责扫描、连接BLE心率设备并从其接收数据。
* **get\_heart\_rate/test.py**: 一个用于扫描和选择BLE设备的测试脚本。
* **config.py**: 处理将应用程序的配置保存到 `config.json` 文件和从中加载配置。
* **requirements.txt**: 列出了运行该应用程序所需的Python包。
* **.gitignore**: 指定在Git仓库中要忽略的文件和目录。

## 安装

1.  **克隆仓库:**
    ```bash
    git clone https://github.com/ccc007ccc/HeartRateMonitor
    cd HeartRateMonitor
    ```
2.  **安装依赖:**
    ```bash
    pip install -r requirements.txt
    ```

## 使用方法

1.  **运行应用程序:**
    ```bash
    python main.py
    ```
2.  **扫描设备:** 点击“扫描设备”按钮以查找附近的BLE心率监测器。
3.  **选择并连接:** 从列表中选择您的设备，然后点击“连接”。
4.  **悬浮窗:**
    * 点击“显示悬浮窗”以显示心率浮层。
    * 将窗口拖动到您想要的位置。
    * 点击“锁定悬浮窗”使其可穿透点击。颜色会改变以指示锁定状态。
    * 您可以在主窗口中为锁定和解锁状态自定义颜色。
5.  **保存设置:** 点击“保存设置”以保存当前设备和窗口配置。关闭应用程序时也会自动保存设置。

## 常见问题 (FAQ)

1. 为什么悬浮窗在某些全屏游戏里不显示？

    这是因为部分游戏使用了“独占式全屏”模式，该模式会完全接管屏幕的显示权，导致其他应用（包括本应用的悬浮窗）无法在游戏之上显示。

    全屏显示悬浮窗需要直接将内容绘制到游戏的渲染画面中,我害怕测试过程中被封号,所以没弄😓。

    解决方案： 请尝试将游戏的显示模式从“全屏”或“独占式全屏”更改为“无边框窗口”或“窗口化全屏”。这样既能获得近似全屏的视觉效果，也能让悬浮窗正常显示。

2. 应用无法找到我的蓝牙手环/心率带？

    请确保您的设备已经开启心率广播，并且蓝牙是可发现状态。您的电脑蓝牙功能已正常开启。